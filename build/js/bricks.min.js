!function t(e,i,n){function o(r,a){if(!i[r]){if(!e[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(s)return s(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var m=i[r]={exports:{}};e[r][0].call(m.exports,function(t){var i=e[r][1][t];return o(i?i:t)},m,m.exports,t,e,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();Object.defineProperty(i,"__esModule",{value:!0});var a=t("imagesloaded"),h=n(a),u=function(t){var e={animation:!0,animationDelay:50,imageContainerElement:"div",imageLoadedClassName:"bricks__img--loaded",margin:0,maxHeight:250},i=function(){function i(t,n){o(this,i),this._elem=t,this._images=Array.from(this._elem.querySelectorAll("img")),this._opts=Object.assign(e,n),this._init()}return r(i,[{key:"_init",value:function(){this._checkOptions(),this._addEventListeners(),this._loadImages()}},{key:"_checkOptions",value:function(){"number"!=typeof this._opts.maxHeight&&console.error("maxHeight must be a number not a "+s(this._opts.maxHeight)+"."),this._opts.hasOwnProperty("beforeLoad")&&"function"!=typeof this._opts.beforeLoad&&console.error("beforeLoad must be a function not a "+s(this._opts.beforeLoad)+"."),this._opts.hasOwnProperty("afterLoad")&&"function"!=typeof this._opts.afterLoad&&console.error("afterLoad must be a function not a "+s(this._opts.afterLoad)+"."),this._opts.hasOwnProperty("imageContainerElement")&&"string"!=typeof this._opts.imageContainerElement&&console.error("imageContainerElement must be a string not a "+s(this._opts.imageContainerElement)+".")}},{key:"_addEventListeners",value:function(){window.addEventListener("resize",this._createRows.bind(this,this._images))}},{key:"_loadImages",value:function(){var e=this,i=t(this._elem);i.on("always",function(t){e._opts.beforeLoad&&e._opts.beforeLoad(),e._createRows(e._images),e._showImages(t.images),e._opts.afterLoad&&e._opts.afterLoad()}),i.on("progress",function(t,e){var i=e.img;i.setAttribute("data-width",i.offsetWidth),i.setAttribute("data-height",i.offsetHeight)})}},{key:"_createRows",value:function(t){var e=this._elem.clientWidth,i=this._images.slice(),n=void 0,o=void 0;t:for(;i.length>0;){for(var s=1;s<=i.length;s++)if(n=i.slice(0,s),o=this._getHeight(n,e),o<this._opts.maxHeight){this._setDimensions(n,o),this._opts.margin>0&&this._setMargins(n);for(var r=0;r<n.length;r++)n[r].parentNode.classList.contains("bricks__item")||this._makeImageContainer(n);i=i.slice(s);continue t}this._setDimensions(n,Math.min(this._opts.maxHeight,o)),this._opts.margin>0&&this._setMargins(n);for(var s=0;s<n.length;s++)n[s].parentNode.classList.contains("bricks__item")||this._makeImageContainer(n);break}}},{key:"_showImages",value:function(t){var i=this,n=0;t.forEach(function(t){var o=t.img;i._opts.animation&&!o.classList.contains(i._opts.imageLoadedClassName)?("number"!=typeof i._opts.animationDelay?(n+=parseInt(e.animationDelay),console.error("animationDelay must be a valid number.")):n+=parseInt(i._opts.animationDelay),o.style.animationDelay=n+"ms",o.classList.add(i._opts.imageLoadedClassName)):(o.style.animationDuration="0ms",o.classList.add(i._opts.imageLoadedClassName)),i._animationComplete(o),t.isLoaded||console.error(t.img.src+" failed to load.")})}},{key:"_setDimensions",value:function(t,e){t&&t.length&&t.forEach(function(t,i){var n=parseInt(t.getAttribute("data-width")),o=parseInt(t.getAttribute("data-height"));t.style.width=e*(n/o)+"px",t.style.height=e+"px"})}},{key:"_setMargins",value:function(t){var e=this;t&&t.length&&t.forEach(function(i,n){i.style.removeProperty("margin-right"),n!==t.length-1&&(i.style.marginRight=e._opts.margin+"px")})}},{key:"_getHeight",value:function(t,e){var i=0,n=this._opts.margin;return n>0&&(e-=t.length*n,e+=n),t&&t.length&&t.forEach(function(t,e){var n=parseInt(t.getAttribute("data-width")),o=parseInt(t.getAttribute("data-height"));i+=n/o}),e/i}},{key:"_animationComplete",value:function(t){var e=function i(){t.style.removeProperty("animation-delay"),t.removeEventListener("animationend",i)};t.addEventListener("animationend",e)}},{key:"_makeImageContainer",value:function(t){var e=this;t&&t.length&&t.forEach(function(t,i){var n=e._opts.imageContainerElement,o=e._makeDOMNode(n,"bricks__item");"a"===n&&(o.href=t.getAttribute("data-href")||"#"),o.appendChild(t),e._elem.appendChild(o)})}},{key:"_makeDOMNode",value:function(t,e){var i=document.createElement(t);return i.classList.add("bricks__item"),i}},{key:"loadNewImages",value:function(t){var e=this;t&&t.length&&"object"===("undefined"==typeof t?"undefined":s(t))?(t.forEach(function(t){t.classList.add("bricks__img"),e._images.push(t)}),this._loadImages()):console.error("appendImages only accepts an array of image nodes.")}}]),i}();return i}(h["default"]);i["default"]=u},{imagesloaded:4}],2:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var o=t("./bricks"),s=n(o),r=window.Bricks||s["default"];window.Bricks=r},{"./bricks":1}],3:[function(t,e,i){!function(t,i){"function"==typeof define&&define.amd?define(i):"object"==typeof e&&e.exports?e.exports=i():t.EvEmitter=i()}(this,function(){"use strict";function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n=i[t]=i[t]||[];return n[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,o=i[n];e=e||[];for(var s=this._onceEvents&&this._onceEvents[t];o;){var r=s&&s[o];r&&(this.off(t,o),delete s[o]),o.apply(this,e),n+=r?0:1,o=i[n]}return this}},t})},{}],4:[function(t,e,i){!function(i,n){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(t){return n(i,t)}):"object"==typeof e&&e.exports?e.exports=n(i,t("ev-emitter")):i.imagesLoaded=n(i,i.EvEmitter)}(window,function(t,e){"use strict";function i(t,e){for(var i in e)t[i]=e[i];return t}function n(t){var e=[];if(Array.isArray(t))e=t;else if("number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e}function o(t,e,s){return this instanceof o?("string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=n(t),this.options=i({},this.options),"function"==typeof e?s=e:i(this.options,e),s&&this.on("always",s),this.getImages(),a&&(this.jqDeferred=new a.Deferred),void setTimeout(function(){this.check()}.bind(this))):new o(t,e,s)}function s(t){this.img=t}function r(t,e){this.url=t,this.element=e,this.img=new Image}var a=t.jQuery,h=t.console;o.prototype=Object.create(e.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),this.options.background===!0&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&u[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var s=t.querySelectorAll(this.options.background);for(n=0;n<s.length;n++){var r=s[n];this.addElementBackgroundImages(r)}}}};var u={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,t),n=i.exec(e.backgroundImage)}},o.prototype.addImage=function(t){var e=new s(t);this.images.push(e)},o.prototype.addBackground=function(t,e){var i=new r(t,e);this.images.push(i)},o.prototype.check=function(){function t(t,i,n){setTimeout(function(){e.progress(t,i,n)})}var e=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},o.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&h&&h.log("progress: "+i,t,e)},o.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},s.prototype=Object.create(e.prototype),s.prototype.check=function(){var t=this.getIsImageComplete();return t?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},s.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},s.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},s.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},s.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},s.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},s.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},r.prototype=Object.create(s.prototype),r.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var t=this.getIsImageComplete();t&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},r.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},r.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},o.makeJQueryPlugin=function(e){e=e||t.jQuery,e&&(a=e,a.fn.imagesLoaded=function(t,e){var i=new o(this,t,e);return i.jqDeferred.promise(a(this))})},o.makeJQueryPlugin(),o})},{"ev-emitter":3}]},{},[2]);
//# sourceMappingURL=bricks.min.js.map
