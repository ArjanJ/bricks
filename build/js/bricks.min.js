!function e(t,i,n){function o(r,a){if(!i[r]){if(!t[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(s)return s(r,!0);var m=new Error("Cannot find module '"+r+"'");throw m.code="MODULE_NOT_FOUND",m}var u=i[r]={exports:{}};t[r][0].call(u.exports,function(e){var i=t[r][1][e];return o(i?i:e)},u,u.exports,e,t,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();Object.defineProperty(i,"__esModule",{value:!0});var a=e("imagesloaded"),h=n(a),m=function(e){var t={animation:!0,animationDelay:50,imageContainerElement:"div",imageLoadedClassName:"bricks__img--loaded",margin:0,maxHeight:250},i=function(){function i(e,n){o(this,i),this._elem=e,this._images=Array.from(this._elem.querySelectorAll("img")),this._opts=Object.assign(t,n),this._init()}return r(i,[{key:"_init",value:function(){this._checkOptions(),this._addEventListeners(),this._loadImages()}},{key:"_checkOptions",value:function(){"number"!=typeof this._opts.maxHeight&&console.error("maxHeight must be a number not a "+s(this._opts.maxHeight)+"."),this._opts.hasOwnProperty("beforeLoad")&&"function"!=typeof this._opts.beforeLoad&&console.error("beforeLoad must be a function not a "+s(this._opts.beforeLoad)+"."),this._opts.hasOwnProperty("afterLoad")&&"function"!=typeof this._opts.afterLoad&&console.error("afterLoad must be a function not a "+s(this._opts.afterLoad)+"."),this._opts.hasOwnProperty("imageContainerElement")&&"string"!=typeof this._opts.imageContainerElement&&console.error("imageContainerElement must be a string not a "+s(this._opts.imageContainerElement)+".")}},{key:"_addEventListeners",value:function(){window.addEventListener("resize",this._createRows.bind(this,this._images))}},{key:"_loadImages",value:function(){var t=this,i=e(this._elem);i.on("always",function(e){t._opts.beforeLoad&&t._opts.beforeLoad(),t._createRows(t._images),t._showImages(e.images),t._opts.afterLoad&&t._opts.afterLoad(),t._elem.style.removeProperty("height")}),i.on("progress",function(e,t){var i=t.img;i.setAttribute("data-width",i.offsetWidth),i.setAttribute("data-height",i.offsetHeight)})}},{key:"_createRows",value:function(e){var t=this._elem.clientWidth,i=this._images.slice(),n=void 0,o=void 0;e:for(;i.length>0;){for(var s=1;s<=i.length;s++)if(n=i.slice(0,s),o=this._getHeight(n,t),o<this._opts.maxHeight){this._setDimensions(n,o),this._opts.margin>0&&this._setMargins(n);for(var r=0;r<n.length;r++)n[r].parentNode.classList.contains("bricks__item")||this._makeImageContainer(n);i=i.slice(s);continue e}this._setDimensions(n,Math.min(this._opts.maxHeight,o)),this._opts.margin>0&&this._setMargins(n);for(var s=0;s<n.length;s++)n[s].parentNode.classList.contains("bricks__item")||this._makeImageContainer(n);break}}},{key:"_showImages",value:function(e){var i=this,n=0;e.forEach(function(e){var o=e.img;i._opts.animation&&!o.classList.contains(i._opts.imageLoadedClassName)?("number"!=typeof i._opts.animationDelay?(n+=parseInt(t.animationDelay),console.error("animationDelay must be a valid number.")):n+=parseInt(i._opts.animationDelay),o.style.animationDelay=n+"ms",o.classList.add(i._opts.imageLoadedClassName)):(o.style.animationDuration="0ms",o.classList.add(i._opts.imageLoadedClassName)),i._animationComplete(o),e.isLoaded||console.error(e.img.src+" failed to load.")})}},{key:"_setDimensions",value:function(e,t){e&&e.length&&e.forEach(function(e,i){var n=parseInt(e.getAttribute("data-width")),o=parseInt(e.getAttribute("data-height"));e.style.width=t*(n/o)+"px",e.style.height=t+"px"})}},{key:"_setMargins",value:function(e){var t=this;e&&e.length&&e.forEach(function(i,n){i.style.removeProperty("margin-right"),n!==e.length-1&&(i.style.marginRight=t._opts.margin+"px")})}},{key:"_getHeight",value:function(e,t){var i=0,n=this._opts.margin;return n>0&&(t-=e.length*n,t+=n),e&&e.length&&e.forEach(function(e,t){var n=parseInt(e.getAttribute("data-width")),o=parseInt(e.getAttribute("data-height"));i+=n/o}),t/i}},{key:"_animationComplete",value:function(e){var t=function i(){e.style.removeProperty("animation-delay"),e.removeEventListener("animationend",i)};e.addEventListener("animationend",t)}},{key:"_makeImageContainer",value:function(e){var t=this;e&&e.length&&e.forEach(function(e,i){var n=t._opts.imageContainerElement,o=t._makeDOMNode(n,"bricks__item");"a"===n&&(o.href=e.getAttribute("data-href")||"#"),o.appendChild(e),t._elem.appendChild(o)})}},{key:"_makeDOMNode",value:function(e,t){var i=document.createElement(e);return i.classList.add("bricks__item"),i}},{key:"loadNewImages",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];if(e&&e.length&&"object"===("undefined"==typeof e?"undefined":s(e))){var i=void 0;t&&(this._images=[]);for(var n=0,o=e.length;o>n;n++)i=new Image,i.src=e[n],i.classList.add("bricks__img"),this._images.push(i),this._elem.appendChild(i);this._loadImages()}else console.error("loadNewImages only accepts an array of image paths.")}},{key:"reloadImages",value:function(){var e=this,t=this._images,i=[];this._elem.style.height=this._elem.clientHeight+"px",t.forEach(function(e){e.parentElement.remove(),i.push(e.src)}),setTimeout(function(){e.loadNewImages(i,!0),i=[]},250)}}]),i}();return i}(h["default"]);i["default"]=m},{imagesloaded:4}],2:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var o=e("./bricks"),s=n(o),r=window.Bricks||s["default"];window.Bricks=r},{"./bricks":1}],3:[function(e,t,i){!function(e,i){"function"==typeof define&&define.amd?define(i):"object"==typeof t&&t.exports?t.exports=i():e.EvEmitter=i()}(this,function(){"use strict";function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return-1==n.indexOf(t)&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{},n=i[e]=i[e]||[];return n[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return-1!=n&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=0,o=i[n];t=t||[];for(var s=this._onceEvents&&this._onceEvents[e];o;){var r=s&&s[o];r&&(this.off(e,o),delete s[o]),o.apply(this,t),n+=r?0:1,o=i[n]}return this}},e})},{}],4:[function(e,t,i){!function(i,n){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(e){return n(i,e)}):"object"==typeof t&&t.exports?t.exports=n(i,e("ev-emitter")):i.imagesLoaded=n(i,i.EvEmitter)}(window,function(e,t){"use strict";function i(e,t){for(var i in t)e[i]=t[i];return e}function n(e){var t=[];if(Array.isArray(e))t=e;else if("number"==typeof e.length)for(var i=0;i<e.length;i++)t.push(e[i]);else t.push(e);return t}function o(e,t,s){return this instanceof o?("string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=n(e),this.options=i({},this.options),"function"==typeof t?s=t:i(this.options,t),s&&this.on("always",s),this.getImages(),a&&(this.jqDeferred=new a.Deferred),void setTimeout(function(){this.check()}.bind(this))):new o(e,t,s)}function s(e){this.img=e}function r(e,t){this.url=e,this.element=t,this.img=new Image}var a=e.jQuery,h=e.console;o.prototype=Object.create(t.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&m[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var s=e.querySelectorAll(this.options.background);for(n=0;n<s.length;n++){var r=s[n];this.addElementBackgroundImages(r)}}}};var m={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},o.prototype.addImage=function(e){var t=new s(e);this.images.push(t)},o.prototype.addBackground=function(e,t){var i=new r(e,t);this.images.push(i)},o.prototype.check=function(){function e(e,i,n){setTimeout(function(){t.progress(e,i,n)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},o.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&h&&h.log("progress: "+i,e,t)},o.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},s.prototype=Object.create(t.prototype),s.prototype.check=function(){var e=this.getIsImageComplete();return e?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},s.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},s.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},s.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},s.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},s.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},s.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},r.prototype=Object.create(s.prototype),r.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var e=this.getIsImageComplete();e&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},r.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},o.makeJQueryPlugin=function(t){t=t||e.jQuery,t&&(a=t,a.fn.imagesLoaded=function(e,t){var i=new o(this,e,t);return i.jqDeferred.promise(a(this))})},o.makeJQueryPlugin(),o})},{"ev-emitter":3}]},{},[2]);
//# sourceMappingURL=bricks.min.js.map
